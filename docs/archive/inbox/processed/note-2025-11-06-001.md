# Note 2025-11-06-001: Render 免費方案冷啟動問題應對機制

**建立日期**: 2025-11-06  
**狀態**: ✅ converted  
**類型**: Optimization

---

## 想法描述

正式部署上線後，後端使用 Render 免費方案會有冷啟動問題，需要建立一套應對機制。

### 問題分析

#### 1. 平常未使用，臨時打開前端
- **問題**：需要等待後端啟動
- **需求**：
  - 優化後端還沒啟動時的體驗
  - 與真的壞掉要有區別（例如判斷是啟動中）
  - 有明確機制跟 UI 告知（在等待合理的冷啟動時間後會再 load 資料回來）
  - 長期做法：設定 cron job 定期戳後端避免冷啟動（需要最適合的 endpoint）

#### 2. 已經打開前端但閒置
- **問題**：需要定期去戳後端避免後端超過冷啟動的閑置時間
- **需求**：建立定期檢查機制

#### 3. 頻率限制
- **問題**：確保前端不能有太頻繁去 call 後端的行為
- **需求**：避免頻率過高導致後端限流

### 技術需求

1. **前端機制**：
   - 後端啟動中狀態判斷（區分啟動中 vs 真的壞掉）
   - UI 告知機制（等待冷啟動時間後重試）
   - 定期戳後端的機制（但要控制頻率）

2. **後端機制**：
   - 適合 cron job 的 endpoint（輕量級，不會造成負擔）
   - 健康檢查 endpoint 優化

3. **最佳實踐**：
   - 合理的檢查頻率（避免限流）
   - 冷啟動時間的合理預期（UI 告知）
   - 自動重試機制

---

## 相關資訊

- **平台限制**：Render 免費方案冷啟動限制
- **相關技術**：前端狀態管理、健康檢查、定期檢查機制
- **相關 Epic/Story**：可能需要建立新的 Optimization Epic

---

## 後續處理（整理）

- [x] 已整理
- [x] 轉換為：架構討論輸入（待日後規劃 Render 運維優化 Story）
- [x] 相關文件：`docs/archive/discussions/discussion-2025-11-07-multi-store-architecture.md`

---

**轉換日期**: 2025-11-07


